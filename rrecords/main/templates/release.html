{% extends "base.html" %}

{% block content %}

<script>
    function toggleContent(id) {
        const checkbox = document.getElementById(id);
        const textarea = document.getElementById(id+"div");
        const button = document.getElementById(id+"button");

        button.classList.toggle('is-active')
        button.classList.toggle('is-focused')
        textarea.style.display = checkbox.checked ? "block" : "none";
    }
</script>

<div class="columns is-centered">
    <div class="column is-four-fifths">
        <section class="section">
            <h1 class="title has-text-left" >{{ item.title }}</h1>
            <h2 class="subtitle has-text-left">{{ item.artists_sort }} ({{item.year}})</h2>
        </section>
        <div class="columns is-variable">
            <div class="column is-one-third">
                <div class="tile is-vertical box">
                    <div>
                        <figure>
                            <img src="{{ item.cover_image }}" />
                        </figure>
                    </div>
                </div>

                <div class="tile is-vertical box">
                    <nav class="level py-2">
                        <div class="level-item">
                            <a href="{{ item.musicbrainz_url }}">
                                <img src="{{ url_for('main_bp.static', filename='images/musicbrainz_logo.png') }}" style="width:auto;height:25px;" alt="musicbrainz"/>
                            </a>
                        </div>
                        <div class="level-item">
                            <a href="{{ item.discogs_url }}">
                                <img src="{{ url_for('main_bp.static', filename='images/discogs_logo_2.png') }}" style="width:auto;height:25px;" alt="discogs"/>
                            </a>
                        </div>
                    </nav>
                </div>
            </div>
            <div class="column is-one-half">
                <div class="tile is-vertical box">
                    <nav class="level">
                        <div class="buttons">
                            {% for disc in item['discs'] %}
                            <input type="checkbox" class="btn-check" id="{{ disc.id }}" checked autocomplete="off" onclick="toggleContent('{{ disc.id }}');">
                            <label class="button is-focused is-active" for="{{ disc.id }}" id="{{ disc.id }}button">{{ disc.id }}</label>
                            {% endfor %}
                        </div>
                    </nav>

                    {% for disc in item.discs %}
                        <div id="{{ disc.id }}div" class="content is-small">
                            <table class="table is-striped">
                                <thead>
                                    <tr>
                                        <th>{{ disc.format.name }}</th>
                                        <td colspan="3">{{ disc.format.description_string }}</td>
                                    </tr>
                                </thead>
                                <tbody>
                                    {% for track in disc.tracks %}
                                    <tr>
                                        <th>{{track.position}}</th>
                                        <td>{{track.title}}</td>
                                        <td>{{track.duration}}</td>
                                        <td>
                                            {% if track.musicbrainz_url %}
                                                <a data-tooltip="{{ track.musicbrainz_description }}" href="{{ track.musicbrainz_url }}">
                                                    <img src="{{ url_for('main_bp.static', filename='images/musicbrainz.ico') }}" style="width:auto;height:10px;"/>
                                                </a>
                                            {% endif %}
                                        </td>
                                    </tr>
                                    {% endfor %}
                                </tbody>
                            </table>
                        </div>
                    {% endfor %}
                </div>
            </div>
            <div class="column is-one-fifth">
                <div class="tile is-vertical box">

                </div>
            </div>

        </div>
    </div>
</div>

{% endblock %}